!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="389d8c9f-17b0-4102-a698-278b2ff8224c",e._sentryDebugIdIdentifier="sentry-dbid-389d8c9f-17b0-4102-a698-278b2ff8224c")}catch(e){}}(),(self.webpackChunktwitch_twilight=self.webpackChunktwitch_twilight||[]).push([[69028],{600763:function(e){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"UseLive"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"stream"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]}]}}]}}]}}]};function t(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var i=e.type;"NamedType"===i.kind&&n.add(i.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){t(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){t(e,n)})),e.definitions&&e.definitions.forEach((function(e){t(e,n)}))}var i={};n.definitions.forEach((function(e){if(e.name){var n=new Set;t(e,n),i[e.name.value]=n}})),e.exports=n},917524:function(e){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Whispers_Tracking_CurrentUser"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hasTurbo"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"availability"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}}]}}]};function t(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var i=e.type;"NamedType"===i.kind&&n.add(i.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){t(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){t(e,n)})),e.definitions&&e.definitions.forEach((function(e){t(e,n)}))}var i={};n.definitions.forEach((function(e){if(e.name){var n=new Set;t(e,n),i[e.name.value]=n}})),e.exports=n},842715:function(e,n,t){"use strict";t.d(n,{TD:function(){return v},Zu:function(){return i}});var i,r=t(331635),o=t(474848),a=t(216042),s=t(914421),u=t(808681),c=t(86011),l=t(324602),d=t(296540),f=t(868238),h=t(478260),g=t(732446),p=function(e){function n(n){var t=e.call(this,n)||this;return t.state={isError:!1,options:null,balloonID:""},t.logger=h.x2.logger.withCategory("balloon-layer"),t.handleHistoryChange=function(){t.hideBalloon()},i=t,t}return(0,r.__extends)(n,e),n.prototype.componentDidMount=function(){this.props.subscribe(this.handleHistoryChange)},n.prototype.componentDidCatch=function(e,n){var t=this;this.setState({isError:!0},(function(){h.x2.stats.recordComponentError("BalloonLayer"),t.logger.errorAndReport(e,"A unhandled exception occurred in the component hierarchy",{info:n})}))},n.prototype.componentDidUpdate=function(e,n){var t=n.options,i=t&&t.onBalloonUpdate,r=t&&t.onHideBalloon,o=this.state.options,a=o&&o.onBalloonUpdate;t!==o&&(i&&i(this.state.balloonID),r&&r(),a&&a!==i&&a(this.state.balloonID))},n.prototype.render=function(){if(this.state.isError)return null;var e=null;if(this.state.options){var n={left:this.state.options.from.x,top:this.state.options.from.y};e=(0,o.jsx)(a.S,{className:"balloon-layer",position:s.yX.Fixed,zIndex:s.Py.Above,children:(0,o.jsx)("div",{style:n,children:(0,o.jsx)(u.E,{direction:this.state.options.direction?this.state.options.direction:c.j.Right,size:this.state.options.size||l.$V.Large,show:!0,children:this.state.options.content})})})}return e},n.prototype.showBalloon=function(e,n){this.setState({options:e,balloonID:n})},n.prototype.hideBalloon=function(){this.setState({options:null,balloonID:""})},n}(d.Component),v=(0,f.Zz)(g.y)(p)},290942:function(e,n,t){"use strict";t.d(n,{Z:function(){return r}});var i=t(296540);function r(e){var n=(0,i.useRef)();return(0,i.useEffect)((function(){n.current=e}),[e]),n.current}},672348:function(e,n,t){"use strict";t.d(n,{M:function(){return s},p:function(){return a}});var i,r=t(334098),o=t(183733),a=(i=(0,t(752929).f)(r.y,o.X))[0],s=i[1]},183175:function(e,n,t){"use strict";t.d(n,{M:function(){return l}});var i=t(296540),r=t(145748),o=t(783321),a=t(982821),s=t(456450),u=t(600763),c=t.n(u);function l(e,n){var t,u,l,d,f,h,g=(0,i.useRef)(!0),p=(0,o.IT)(c(),{variables:{channelLogin:null!=e?e:""},skip:!e,fetchPolicy:n?"cache-first":"network-only"}),v=p.data,m=p.loading,k=null!==(u=null===(t=null==v?void 0:v.user)||void 0===t?void 0:t.id)&&void 0!==u?u:null,_=m?null:!!(null===(d=null===(l=null==v?void 0:v.user)||void 0===l?void 0:l.stream)||void 0===d?void 0:d.id),y=(0,i.useState)(_),b=y[0],w=y[1],S=(0,i.useState)(null),T=S[0],x=S[1],C=(0,r.D)(k?(0,s.RW)(k):"",{skip:!k})[0];(0,i.useEffect)((function(){g.current=!0,x(null)}),[e]),(0,i.useEffect)((function(){g.current&&!m&&w(_)}),[_,m]),(0,i.useEffect)((function(){C&&(g.current=!1,!function(e){return e.type===a.PD.ChannelStreamDown}(C)?w(!0):(w(!1),x(null)))}),[C]);var I=(0,i.useMemo)((function(){return function(e){var n,t,i=null===(t=null===(n=null==e?void 0:e.user)||void 0===n?void 0:n.stream)||void 0===t?void 0:t.createdAt;if(!i)return null;return new Date(i)}(v)}),[v]);(0,i.useEffect)((function(){!b||I||T?(I&&T||!b)&&x(null):x(new Date)}),[b,I,T]);var R=null;return(null===(f=null==v?void 0:v.user)||void 0===f?void 0:f.login)&&(null===(h=null==v?void 0:v.user)||void 0===h?void 0:h.login.toLowerCase())===(null==e?void 0:e.toLowerCase())&&(R=null!=b?b:g.current?_:null),{isLive:R,liveSince:null!=T?T:I}}},354288:function(e,n,t){"use strict";t.d(n,{OG:function(){return a},j1:function(){return u},lC:function(){return o}});var i=t(478260),r="dmca-warn-dismissed";function o(){return i.IG.set(r,!0)}function a(){return i.IG.get(r,!1)}var s="ask_clint_or_ryan";function u(e){return e.firstPageLoaded&&e.isLoggedIn&&i.Zn.get(s,!1)&&!a()}},545936:function(e,n,t){"use strict";t.d(n,{Ge:function(){return a},Ht:function(){return s},JP:function(){return c},SR:function(){return o},gG:function(){return l},gU:function(){return u}});var i=t(337930),r=t(478260),o="open-calling",a=function(){return(0,i.fX)(o)},s=function(){return r.Zn.get("open-collaboration-dashboard-onboarding",!1)},u=function(){return(0,i.fX)(o)||(0,i.fX)("open-collaboration-darklaunch")},c=function(){return(0,i.fX)("whos_there")},l=function(){return(0,i.fX)("smart_friend")}},111424:function(e,n,t){"use strict";t.d(n,{L8:function(){return r},oW:function(){return o}});var i=t(337930),r=function(){return(0,i.fX)("not_cht")},o=function(){return(0,i.fX)("cht_emote_campaign_active")}},942111:function(e,n,t){"use strict";t.d(n,{W:function(){return r}});var i=t(337930),r=function(){return(0,i.fX)("collaboration_viewership_enabled")}},344560:function(e,n,t){"use strict";t.d(n,{h:function(){return i}});var i=t(407827).x.wrap((function(){return Promise.all([t.e(59172),t.e(8180)]).then(t.bind(t,52279))}),"SprigManagerComponent",{failSilently:!0,placeholder:null})},234484:function(e,n,t){"use strict";t.d(n,{c:function(){return o},n:function(){return a}});var i=t(478260),r=t(345029),o=function(e,n){i.x2.tracking.__track_SSRMigrationFixme("tos_s_pv_dialog",{action:e,country:(0,r.If)()||"",tos_version:n.TERMS_OF_SERVICE||null,sale_version:n.TERMS_OF_SALE||null,privacy_version:n.PRIVACY_NOTICE||null})},a=function(e){return e.reduce((function(e,n){return e[n.consentType]=n.version,e}),{})}},248688:function(e,n,t){"use strict";t.d(n,{H1:function(){return f},N3:function(){return d},nE:function(){return u},rm:function(){return h},uF:function(){return l}});var i=t(474848),r=t(70931),o=t(478260),a=t(267924),s=t(234484),u="tacos-properties",c=864e5;function l(e){return Date.now()-e>c}function d(e){return e.firstPageLoaded&&e.isLoggedIn}var f=function(e){var n=e.find((function(e){return e.consentType===a.wsc.TERMS_OF_SERVICE})),t=e.find((function(e){return e.consentType===a.wsc.TERMS_OF_SALE})),i=e.find((function(e){return e.consentType===a.wsc.PRIVACY_NOTICE}));return n&&t&&i?(0,o.hw)("Twitch has updated its Terms of Service, Terms of Sale, and Privacy Notice. Please be sure to read our updated documents.","TOSBottomBanner"):n&&t&&!i?(0,o.hw)("Twitch has updated its Terms of Service and Terms of Sale. Please be sure to read our updated Terms.","TOSBottomBanner"):n&&!t&&i?(0,o.hw)("Twitch has updated its Terms of Service and Privacy Notice. Please be sure to read our updated documents.","TOSBottomBanner"):!n||t||i?!n&&t&&i?(0,o.hw)("Twitch has updated its Terms of Sale and Privacy Notice. Please be sure to read our updated documents.","TOSBottomBanner"):n||!t||i?n||t||!i?void 0:(0,o.hw)("Twitch has updated its Privacy Notice. Please be sure to read our updated Notice.","TOSBottomBanner"):(0,o.hw)("Twitch has updated its Terms of Sale. Please be sure to read our updated Terms.","TOSBottomBanner"):(0,o.hw)("Twitch has updated its Terms of Service. Please be sure to read our updated Terms.","TOSBottomBanner")},h=function(e){var n=e.find((function(e){return e.consentType===a.wsc.TERMS_OF_SERVICE})),t=e.find((function(e){return e.consentType===a.wsc.TERMS_OF_SALE})),u=e.find((function(e){return e.consentType===a.wsc.PRIVACY_NOTICE})),c=function(e){return(0,i.jsx)(r.Cb,{targetBlank:!0,linkTo:null==n?void 0:n.url,onClick:function(){return(0,s.c)("click_tos",{TERMS_OF_SERVICE:null==n?void 0:n.version,TERMS_OF_SALE:null==t?void 0:t.version,PRIVACY_NOTICE:null==u?void 0:u.version})},underline:!1,children:e})},l=function(e){return(0,i.jsx)(r.Cb,{targetBlank:!0,linkTo:null==t?void 0:t.url,onClick:function(){return(0,s.c)("click_sale",{TERMS_OF_SERVICE:null==n?void 0:n.version,TERMS_OF_SALE:null==t?void 0:t.version,PRIVACY_NOTICE:null==u?void 0:u.version})},underline:!1,children:e})},d=function(e){return(0,i.jsx)(r.Cb,{targetBlank:!0,linkTo:null==u?void 0:u.url,onClick:function(){return(0,s.c)("click_privacy",{TERMS_OF_SERVICE:null==n?void 0:n.version,TERMS_OF_SALE:null==t?void 0:t.version,PRIVACY_NOTICE:null==u?void 0:u.version})},underline:!1,children:e})};return n&&t&&u?(0,o.hw)("By clicking \"Accept\" you agree to Twitch's <x:link1>Terms of Service</x:link1> and <x:link2>Terms of Sale</x:link2>, and acknowledge Twitch's <x:link3>Privacy Notice</x:link3> applies.",{"x:link1":c,"x:link2":l,"x:link3":d},"TOSBottomBanner"):n&&t&&!u?(0,o.hw)('By clicking "Accept" you agree to Twitch\'s <x:link1>Terms of Service</x:link1> and <x:link2>Terms of Sale</x:link2>.',{"x:link1":c,"x:link2":l},"TOSBottomBanner"):n&&!t&&u?(0,o.hw)("By clicking \"Accept\" you agree to Twitch's <x:link1>Terms of Service</x:link1> and acknowledge Twitch's <x:link2>Privacy Notice</x:link2> applies.",{"x:link1":c,"x:link2":d},"TOSBottomBanner"):!n||t||u?!n&&t&&u?(0,o.hw)("By clicking \"Accept\" you agree to Twitch's <x:link1>Terms of Sale</x:link1> and acknowledge Twitch's <x:link2>Privacy Notice</x:link2> applies.",{"x:link1":l,"x:link2":d},"TOSBottomBanner"):n||!t||u?n||t||!u?void 0:(0,o.hw)('By clicking "Accept" you acknowledge Twitch\'s <x:link>Privacy Notice</x:link> applies.',{"x:link":d},"TOSBottomBanner"):(0,o.hw)('By clicking "Accept" you agree to Twitch\'s <x:link>Terms of Sale</x:link>.',{"x:link":l},"TOSBottomBanner"):(0,o.hw)('By clicking "Accept" you agree to Twitch\'s <x:link>Terms of Service</x:link>.',{"x:link":c},"TOSBottomBanner")}},110850:function(e,n,t){"use strict";t.d(n,{f6:function(){return v}});var i,r=t(331635),o=t(296540),a=t(415044),s=t(868238),u=t(478260),c=t(732446),l=t(131883),d=/^assets\/(.+)-.+\.(.+?)$/i,f=function(){function e(e,n){this.enabled=!0,this.logger=e.withCategory("update-manager"),this.config=n,n.manifestURL||(this.logger.warn("Disabling update loader. manifestURL is undefined."),this.enabled=!1),n.cdnURL||(this.logger.warn("Disabling update loader. cdnURL is undefined."),this.enabled=!1)}return e.prototype.getManifest=function(){return(0,r.__awaiter)(this,void 0,void 0,(function(){var e,n,t,i;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return this.config.manifestURL?(this.logger.debug("Downloading manifest",{url:this.config.manifestURL}),e={},[4,fetch(this.config.manifestURL,e)]):(this.logger.errorAndReport(new Error("Unable to download manifest: The manifest URL is not set."),"Unable to download manifest: The manifest URL is not set."),[2]);case 1:if(!(n=r.sent()).ok)return this.logger.errorAndReport(new Error("Unable to download manifest"),"Unable to download manifest.",{status:n.status}),[2];r.label=2;case 2:return r.trys.push([2,4,,5]),[4,n.json()];case 3:if(!(t=r.sent()).channels)throw new Error("Update manager could not load manifest. It appears to be an invalid format.");return[2,t];case 4:return i=r.sent(),this.logger.errorAndReport(i,"Unable to parse manifest."),[3,5];case 5:return[2]}}))}))},e.prototype.getChunkURLs=function(e){for(var n=[],t=0,i=e;t<i.length;t++){var r=i[t],o=this.getChunk(r);o&&this.config.chunksToPreload.includes(o)&&n.push("".concat(this.config.cdnURL).concat(r))}return n},e.prototype.preloadChunks=function(e){return(0,r.__awaiter)(this,void 0,void 0,(function(){var n,t,i,o,a,s;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:if(!e.length)return[2,!1];if(!this.config.cdnURL)return this.logger.errorAndReport(new Error("Missing CDN URL"),"Unable to preload chunks."),[2,!1];if(!(n=this.getChunkURLs(e)).length)return[2,!1];for(t=[],i=0,o=n;i<o.length;i++)a=o[i],t.push(this.prefetchResource(a));if(0===t.length)return[2,!1];this.logger.debug("Prefetching ".concat(t.length," assets...")),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,Promise.all(t)];case 2:return r.sent(),this.logger.debug("All assets finished"),[2,!0];case 3:return s=r.sent(),this.logger.warn("One or more resources failed to load",{error:s}),[2,!1];case 4:return[2]}}))}))},e.prototype.getChunk=function(e){var n=d.exec(e);if(n)return"".concat(n[1],".").concat(n[2])},e.prototype.prefetchResource=function(e){var n=this;return new Promise((function(t,i){try{var r=document.createElement("link");r.rel="prefetch",r.href=e,r.crossOrigin="anonymous",r.onload=function(){return t()},r.onerror=function(){n.logger.debug("Failed to prefetch asset",{url:e}),i()},document.body.appendChild(r)}catch(t){n.logger.errorAndReport(t,"Unable to append prefetch tag",{url:e}),i()}}))},e}();!function(e){e.Canary="canary",e.Live="live",e.Staging="staging"}(i||(i={}));var h="twilight.update_manager.known_builds",g=function(){function e(e,n,t,i){var o=this;this.shouldReloadOnTransition=!1,this.started=!1,this.isUpdating=!1,this.checkForUpdates=function(){return(0,r.__awaiter)(o,void 0,void 0,(function(){var e,n,t;return(0,r.__generator)(this,(function(i){switch(i.label){case 0:if(this.isUpdating)return[2];this.isUpdating=!0,i.label=1;case 1:return i.trys.push([1,3,4,5]),this.logger.debug("Checking for updates..."),[4,this.loader.getManifest()];case 2:return(e=i.sent())?(n=this.getLoadingInstructions(e),this.applyInstructions(n),[3,5]):(this.logger.debug("Manifest is missing. Skipping preload",{currentBuildID:this.config.currentBuildID}),[2]);case 3:return t=i.sent(),this.logger.errorAndReport(t,"Unable to update chunks"),[3,5];case 4:return this.isUpdating=!1,[7];case 5:return[2]}}))}))},this.handleHistoryChange=function(){o.shouldReloadOnTransition&&(o.logger.info("Reloading to current live release."),o.shouldReloadOnTransition=!1,window.location.reload(!0))},this.config=i,this.logger=e.withCategory("update-manager"),this.loader=n,this.knownBuilds=this.getKnownBuilds(),this.historyListener=t}return e.prototype.start=function(){this.started?this.logger.warn("Update manager is already started!"):this.config.enabled?this.loader.enabled?(this.started=!0,this.historyListener(this.handleHistoryChange),this.processManifestInterval=setInterval(this.checkForUpdates,this.config.updateCheckFrequency),this.logger.debug("Update manager has started!",{options:this.config}),this.config.eager&&this.prefetchCurrentRelease()):this.logger.debug("Update manager cannot start. The loader is not enabled.",{options:this.config}):this.logger.debug("Update manager will not start. It is not enabled.",{options:this.config})},e.prototype.stop=function(){clearInterval(this.processManifestInterval),this.started=!1,this.logger.debug("Update manager stopped.")},e.prototype.isKnownBuild=function(e){return this.knownBuilds.has(e)},e.prototype.getKnownBuilds=function(){return new Set(u.VS.get(h,[]))},e.prototype.addKnownBuild=function(e){this.knownBuilds.add(e),u.VS.set(h,Array.from(this.knownBuilds))},e.prototype.resetKnownBuilds=function(){u.VS.remove(h),this.knownBuilds=new Set},e.prototype.getEagerLoadingInstructions=function(e){if(this.isKnownBuild(this.config.currentBuildID))return this.logger.debug("Skipping current release preload. It is already known."),{};var n=this.findCurrentRelease(e);return n&&n.current?n.current.files?{current:n.current,prefetch:[n.current]}:(this.logger.debug("Current release has no files in the manifest. It will not be eagerly loaded."),{current:n.current}):(this.logger.debug("Current release not in manifest. It will not be eagerly loaded."),{})},e.prototype.prefetchCurrentRelease=function(){return(0,r.__awaiter)(this,void 0,void 0,(function(){var e,n,t;return(0,r.__generator)(this,(function(i){switch(i.label){case 0:this.isUpdating=!0,i.label=1;case 1:return i.trys.push([1,3,4,5]),this.logger.debug("Preloading current release..."),[4,this.loader.getManifest()];case 2:return(e=i.sent())?(n=this.getEagerLoadingInstructions(e),this.applyInstructions(n),[3,5]):(this.logger.debug("Manifest is missing. Skipping preload",{currentBuildID:this.config.currentBuildID}),[2]);case 3:return t=i.sent(),this.logger.errorAndReport(t,"Unable to preload current release"),[3,5];case 4:return this.isUpdating=!1,[7];case 5:return[2]}}))}))},e.prototype.getLoadingInstructions=function(e){var n=this.findChannel(e,{primary:!0,active:!0}),t=this.findChannel(e,{primary:!1,active:!0}),r=this.findChannel(e,{primary:!1,active:!1}),o=t&&t.live?t:n,a=this.findCurrentRelease(e);if(!o||!o.live)return this.logger.warn("Manifest contains no default live release."),{current:a&&a.current};if(!a)return this.logger.debug("Unable to determine the current release. We will reload the default live.",{current:this.config.currentBuildID}),{current:void 0,reload:o.live,prefetch:o.canary&&[o.canary]};this.logger.debug("Determined current release",{releaseId:a.current.buildId,releaseStage:a.current.stage,channel:a.channel});var s,u=[];return t&&a.channel.id!==t.channel.id&&(t.live&&(a.channel.primary?s=t.live:u.push(t.live)),t.canary&&u.push(t.canary)),!t&&n&&a.channel.id!==n.channel.id&&(n.live&&u.push(n.live),n.canary&&u.push(n.canary)),r&&a.channel.id!==r.channel.id&&(r.live&&u.push(r.live),r.canary&&u.push(r.canary)),a.current.stage===i.Live&&a.canary&&a.canary.files?u.push(a.canary):a.current.stage===i.Canary&&a.live&&a.live.files&&u.push(a.live),u.length?{current:a.current,prefetch:u,reload:s}:{current:a.current}},e.prototype.applyInstructions=function(e){return(0,r.__awaiter)(this,void 0,void 0,(function(){var n,t,i;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return e.reload?[4,this.prefetchRelease(e.reload)]:[3,2];case 1:r.sent(),this.isKnownBuild(e.reload.buildId)?this.shouldReloadOnTransition=!0:this.logger.warn("Unable to reload on transition, due to failed prefetch."),r.label=2;case 2:if(!e.prefetch)return[3,6];n=0,t=e.prefetch,r.label=3;case 3:return n<t.length?(i=t[n],[4,this.prefetchRelease(i)]):[3,6];case 4:r.sent(),r.label=5;case 5:return n++,[3,3];case 6:return[2]}}))}))},e.prototype.prefetchRelease=function(e){return(0,r.__awaiter)(this,void 0,void 0,(function(){var n;return(0,r.__generator)(this,(function(t){switch(t.label){case 0:return n=e.buildId,this.knownBuilds.has(n)?(this.logger.debug("Release already known. Skipping",{buildID:n}),[2]):e.files?(this.logger.debug("Prefetching a release",n),[4,this.loader.preloadChunks(e.files)]):(this.logger.debug("Skipping release prefetch. It has no files.",{buildID:n}),[2]);case 1:return t.sent()?(this.logger.debug("Successfully prefetched release",{buildID:n}),this.addKnownBuild(n),[2]):(this.logger.debug("Failed to prefetch release",{buildID:n}),[2])}}))}))},e.prototype.findCurrentRelease=function(e){for(var n=0,t=e.channels;n<t.length;n++)for(var r=t[n],o=0,a=r.releases;o<a.length;o++){var s=a[o];if(s.buildId===this.config.currentBuildID){var u=r.releases.find((function(e){return e.stage===i.Canary})),c=r.releases.find((function(e){return e.stage===i.Live}));return{channel:r,current:s,canary:u,live:c}}}},e.prototype.findChannel=function(e,n){var t=e.channels.find((function(e){return e.active===n.active&&e.primary===n.primary&&e.releases.some((function(e){return!!e.files}))}));if(t){var r=t.releases.find((function(e){return e.stage===i.Live})),o=t.releases.find((function(e){return e.stage===i.Canary}));if(r||o)return{channel:t,live:r,canary:o};this.logger.debug("Manifest ".concat(n.primary?"primary":"alternate"," channel has no releases"))}},e}(),p=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return(0,r.__extends)(n,e),n.prototype.componentDidMount=function(){var e=new f(u.x2.logger,{manifestURL:u.x2.config.manifestURL||"",cdnURL:u.x2.config.cdnURL||"",chunksToPreload:u.x2.dynamicSettings.get("update_chunks",[]).concat(["core.locales.".concat(this.props.languageCode,".js")])});this.updateManager=new g(u.x2.logger,e,this.props.subscribe,{enabled:u.x2.dynamicSettings.get("update_manager_enabled",!0),currentBuildID:u.x2.config.buildID,updateCheckFrequency:u.x2.dynamicSettings.get("update_manager_interval",3e5),eager:u.x2.dynamicSettings.get("update_manager_eager",!0)}),this.updateManager.start()},n.prototype.componentWillUnmount=function(){var e;null===(e=this.updateManager)||void 0===e||e.stop()},n.prototype.shouldComponentUpdate=function(){return!1},n.prototype.render=function(){return null},n}(o.Component);var v=(0,s.Zz)((0,a.Ng)((function(e){return{languageCode:(0,l.Ul)(e)}})),c.y)(p)},988224:function(e,n,t){"use strict";t.d(n,{AK:function(){return y},IA:function(){return c},OG:function(){return T},Q7:function(){return N},TF:function(){return b},UI:function(){return S},VM:function(){return x},ZD:function(){return R},_1:function(){return a},_U:function(){return E},_k:function(){return _},e6:function(){return D},fd:function(){return O},jI:function(){return w},kl:function(){return I},qt:function(){return B},rZ:function(){return U},wO:function(){return C}});var i,r,o,a,s,u,c,l=t(331635),d=t(478260),f=t(496228),h=t(917524),g=t.n(h);function p(e){d.x2.tracking.track("chat_convo_mod",{conversation_id:e.threadID,action:e.action})}function v(e){return(0,l.__awaiter)(this,void 0,void 0,(function(){var n;return(0,l.__generator)(this,(function(t){switch(t.label){case 0:return[4,L()];case 1:return n=t.sent(),d.x2.tracking.__track_SSRMigrationFixme("chat_ignore_client",{ui_context:e.context,from_login:n&&n.login,ignored_login:e.targetUserLogin,reason:e.reason||i.Other,source:e.source}),[2]}}))}))}function m(e,n){return(0,l.__awaiter)(this,void 0,void 0,(function(){var t;return(0,l.__generator)(this,(function(i){switch(i.label){case 0:return[4,L()];case 1:return t=i.sent(),d.x2.tracking.track("chat_convo_mod",{conversation_id:e,action:n},{login:t&&t.login}),[2]}}))}))}function k(e){d.x2.tracking.track("chat_convo_mod_global",{action:e})}function _(){k(r.MarkAllRead)}function y(){k(r.EnableDoNotDisturb)}function b(){k(r.DisableDoNotDisturb)}function w(e,n){v({context:n,targetUserLogin:e,reason:i.Spam,source:"conversations_button"})}function S(e){m(e,s.MarkNotSpam)}function T(e){m(e,s.Archive)}function x(e){p({threadID:e,action:o.Mute})}function C(e){p({threadID:e,action:o.Unmute})}function I(e){p({threadID:e,action:o.Expand})}function R(e){p({threadID:e,action:o.Collapse})}function D(e){p({threadID:e,action:o.Close})}function B(e){p({threadID:e,action:o.Archive})}function E(e){d.x2.tracking.__track_SSRMigrationFixme("chat_convo_create",{conversation_id:e.threadID,target_login:e.targetUserlogin,source:"search_target_result",search_result_rank:e.searchResultRank})}function U(e){d.x2.tracking.track("search_click",{query:e.searchQuery,source:"conversation_list",rank:e.searchResultRank,is_conversation:e.isConversation})}function L(){var e=this;return new Promise((function(n){setTimeout((function(){return(0,l.__awaiter)(e,void 0,void 0,(function(){var e,t,i;return(0,l.__generator)(this,(function(r){switch(r.label){case 0:e=null,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,d.x2.apollo.client.query({query:g()})];case 2:return e=r.sent(),[3,4];case 3:return t=r.sent(),(0,f.nF)()?d.vF.warn("Failed to make query for current user info in WhisperSent reporting"):d.vF.errorAndReport(t,"Failed to make query for current user info in WhisperSent reporting"),[3,4];case 4:return i=e&&e.data&&e.data.currentUser,n(i),[2]}}))}))}))}))}function N(e){return(0,l.__awaiter)(this,void 0,void 0,(function(){var n;return(0,l.__generator)(this,(function(t){switch(t.label){case 0:return[4,L()];case 1:return n=t.sent(),d.x2.tracking.__track_SSRMigrationFixme("whisper",{to:e.targetUserLogin,from:n&&n.login,player:"web",is_turbo:n&&n.hasTurbo,conversation_id:e.threadID,availability:n&&n.availability,room_type:e.inChannelChat?u.Channel:u.Conversation,ui_context:e.context}),[2]}}))}))}function O(e){return(0,l.__awaiter)(this,void 0,void 0,(function(){var n;return(0,l.__generator)(this,(function(t){switch(t.label){case 0:return[4,L()];case 1:return n=t.sent(),d.x2.tracking.track("whisper_received",{to:n&&n.login,from:e.targetUserLogin,player:"web",is_turbo:n&&n.hasTurbo,conversation_id:e.threadID}),[2]}}))}))}!function(e){e.Harassment="Harassment",e.Spam="Spam",e.Other="Other"}(i||(i={})),function(e){e.MarkAllRead="mark_all_read",e.EnableDoNotDisturb="do_not_disturb_on",e.DisableDoNotDisturb="do_not_disturb_off"}(r||(r={})),function(e){e.Mute="mute",e.Unmute="unmute",e.Expand="maximize",e.Collapse="minimize",e.Close="close",e.Archive="archive",e.Open="open"}(o||(o={})),function(e){e.Dock="dock",e.SpamPropmt="dock_spam_cta"}(a||(a={})),function(e){e.Archive="archive",e.MarkNotSpam="mark_not_spam"}(s||(s={})),function(e){e.Channel="channel",e.Conversation="conversation"}(u||(u={})),function(e){e.Default="default",e.ModView="mod_view",e.Sunlight="sunligh"}(c||(c={}))}}]);