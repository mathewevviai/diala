!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="b150eee1-f101-4238-8dd5-5c4133d027f8",e._sentryDebugIdIdentifier="sentry-dbid-b150eee1-f101-4238-8dd5-5c4133d027f8")}catch(e){}}(),(self.webpackChunktwitch_twilight=self.webpackChunktwitch_twilight||[]).push([[97320],{19951:function(e){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"SearchTray_SearchSuggestions"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"queryFragment"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"requestID"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"withOfflineChannelContent"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"includeIsDJ"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"searchSuggestions"},arguments:[{kind:"Argument",name:{kind:"Name",value:"queryFragment"},value:{kind:"Variable",name:{kind:"Name",value:"queryFragment"}}},{kind:"Argument",name:{kind:"Name",value:"requestID"},value:{kind:"Variable",name:{kind:"Name",value:"requestID"}}},{kind:"Argument",name:{kind:"Name",value:"withOfflineChannelContent"},value:{kind:"Variable",name:{kind:"Name",value:"withOfflineChannelContent"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"searchSuggestionNode"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"tracking"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"modelTrackingID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"responseID"},arguments:[],directives:[]}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"searchSuggestionNode"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"SearchSuggestionEdge"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"SearchSuggestionChannel"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isLive"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isVerified"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"50"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isParticipatingDJ"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"includeIsDJ"}}}]}]}]}},{kind:"Field",name:{kind:"Name",value:"stream"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"SearchSuggestionCategory"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"boxArtURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"30"}},{kind:"Argument",name:{kind:"Name",value:"height"},value:{kind:"IntValue",value:"40"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"game"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"matchingCharacters"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"start"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"end"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]}]}}]}}]};function n(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var i=e.type;"NamedType"===i.kind&&t.add(i.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){n(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){n(e,t)})),e.definitions&&e.definitions.forEach((function(e){n(e,t)}))}var i={};t.definitions.forEach((function(e){if(e.name){var t=new Set;n(e,t),i[e.name.value]=t}})),e.exports=t},539896:function(e,t,n){"use strict";n.d(t,{V:function(){return s}});var i=n(331635),r=n(474848),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.container=null,t.setContainerRef=function(e){t.container=e},t.handleGlobalMousedown=function(e){var n=e.target;t.isParentOf(n)||t.props.onClickOut(e)},t}return(0,i.__extends)(t,e),t.prototype.componentDidMount=function(){document.addEventListener("mousedown",this.handleGlobalMousedown,!0)},t.prototype.componentWillUnmount=function(){document.removeEventListener("mousedown",this.handleGlobalMousedown,!0)},t.prototype.render=function(){var e=this.props,t=(e.onClickOut,(0,i.__rest)(e,["onClickOut"]));return(0,r.jsx)("div",(0,i.__assign)({},t,{ref:this.setContainerRef,children:this.props.children}))},t.prototype.isParentOf=function(e){for(var t=e;t;){if(t===this.container)return!0;t=t.parentElement}return!1},t}(n(296540).Component)},895154:function(e,t,n){"use strict";n.d(t,{P:function(){return g}});var i,r=n(331635),s=n(474848),o=n(666311),a=n(736585),c=n(959340),l=n(914421),u=n(973421),h=n.n(u),d=n(296540),p=n(105146);!function(e){e.BalloonInsideClickDetector="balloon-inside-click-detector",e.MouseEnterDetector="toggle-balloon-wrapper__mouse-enter-detector"}(i||(i={}));var g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={showBalloon:!!t.props.openByDefault,hasInteracted:!!t.props.openByDefault},t.toggleBalloonId=(0,p.aq)(),t.handleButtonClick=function(e){t.props.preventDefault&&e.preventDefault(),t.props.stopPropagation&&e.stopPropagation(),t.setState((function(e){return{showBalloon:!e.showBalloon,hasInteracted:!0}}),(function(){t.props.onToggle&&t.props.onToggle(!t.state.showBalloon)}))},t.handleGlobalClick=function(e){e.target.matches('[data-toggle-balloon-id="'.concat(t.toggleBalloonId,'"] *'))||t.hideBalloon()},t.handleInsideBalloonClick=function(){t.hideBalloon()},t.handleMouseEnter=function(){t.props.preventMountingContentOnHover||t.state.hasInteracted||t.setState({hasInteracted:!0})},t}return(0,r.__extends)(t,e),t.prototype.componentDidMount=function(){this.props.openByDefault&&document.addEventListener("click",this.handleGlobalClick,!0)},t.prototype.componentDidUpdate=function(e,t){t.showBalloon!==this.state.showBalloon&&(this.state.showBalloon?document.addEventListener("click",this.handleGlobalClick,!0):document.removeEventListener("click",this.handleGlobalClick,!0))},t.prototype.componentWillUnmount=function(){document.removeEventListener("click",this.handleGlobalClick,!0)},t.prototype.render=function(){var e=this,t=d.Children.toArray(this.props.children);if(2!==t.length)throw new Error("ToggleBalloonWrapper should only be given two children: a clickable and a Balloon");var n,u=t[0],p=t[1];if(u.type===o.f){var g=u,y=h()(g.props.dropdown,(function(t){return t.onClick=e.handleButtonClick,t["aria-expanded"]=e.state.showBalloon,t}));n=d.cloneElement(g,{dropdown:y})}else n=!0===u.props.dropdown?d.cloneElement(u,{onClick:this.handleButtonClick,"aria-expanded":this.state.showBalloon}):d.cloneElement(u,{onClick:this.handleButtonClick});var m=null;(this.state.hasInteracted||this.props.alwaysMountBalloonContent)&&(m=d.cloneElement(p,{show:this.state.showBalloon}),this.props.hideBalloonOnInsideClick&&(m=(0,s.jsx)("div",{"data-test-selector":i.BalloonInsideClickDetector,onClick:this.handleInsideBalloonClick,role:"presentation",children:m})));var f=n;return this.props.tooltipProps&&(f=(0,s.jsx)(a.cv,(0,r.__assign)({},this.props.tooltipProps,{children:n}))),(0,s.jsxs)(c.P,{"data-toggle-balloon-id":this.toggleBalloonId,display:this.props.display,position:l.yX.Relative,children:[(0,s.jsx)("div",{style:{display:"inherit"},onMouseEnter:this.handleMouseEnter,"data-test-selector":i.MouseEnterDetector,children:f}),m]})},t.prototype.toggleBalloon=function(e){void 0===e&&(e=!this.state.showBalloon),this.setState({showBalloon:e,hasInteracted:!0})},t.prototype.hideBalloon=function(){var e=this;this.setState({showBalloon:!1},(function(){e.props.onToggle&&e.props.onToggle(!0)}))},t}(d.Component)},264433:function(e,t,n){"use strict";n.d(t,{pF:function(){return d},Pm:function(){return h},eb:function(){return p}});var i=n(331635),r=n(474848),s=n(959340),o=n(97774),a=n(636367),c=n(246942),l=n.n(c),u=n(296540),h="data-tray-item",d="tw-tray-item--highlighted",p=function(e){var t,n,c=u.Children.only(e.children),p=((t={})[h]=!0,t.className=l()(((n={})[d]=e.highlighted,n)),t);return(0,r.jsx)(s.P,{borderRadius:o.Z.Medium,children:(0,r.jsx)(a.tD,(0,i.__assign)({},p,{borderRadius:o.Z.Medium,tabIndex:-1,variant:a.hJ.Alpha},e.interactableProps,{children:c}))})};p.displayName="TrayItem"},177391:function(e,t,n){"use strict";n.d(t,{m:function(){return a}});var i=n(474848),r=n(254714),s=n(413811),o=(n(296540),n(478260)),a=function(e){var t=e.fillColor,n=void 0===t?"brand":t,a=e.size,c=e.isLarge?r.E:s.f;return(0,i.jsx)(c,{fillColor:n,title:(0,o.hw)("Official Twitch DJ","DJIcon"),size:a})}},183948:function(e,t,n){"use strict";n.d(t,{R:function(){return s}});var i,r=n(478260);!function(e){e.Control="control",e.Active="active"}(i||(i={}));var s=function(){return r.x2.experiments.getAndTrackAssignment("web_disco_hamster_switch")===i.Active}},714742:function(e,t,n){"use strict";n.d(t,{HV:function(){return E},Gd:function(){return O}});var i=n(331635),r=n(474848),s=n(759369),o=n(186396),a=n(292644),c=n(927784),l=n(79004),u=n(848683),h=n(808681),d=n(86011),p=n(324602),g=n(959340),y=n(736585),m=n(882439),f=n(296540),v=n(415044),S=n(868238),I=n(478260),k=n(539896),D=n(895154),x=n(914421),_=n(733927),w=n(97774),C=n(264433),T=n(877338),Q=n(105146);var b,P=function(e){function t(t){var n=e.call(this,t)||this;return n.inputRef=null,n.inputID=n.props.inputProps&&n.props.inputProps.id||"tw-".concat((0,Q.k3)()),n.focusInput=function(){n.inputRef&&n.inputRef.focus()},n.getHighlightedIndex=function(){return n.state.highlightedIndex},n.setHighlightedIndex=function(e){n.changeHighlightIndex(e)},n.setInputRef=function(e){n.inputRef=e},n.setDropDownRef=function(e){n.dropDownRef=e},n.handleFocus=function(e){n.setState({isFocused:!0}),n.props.inputProps&&n.props.inputProps.onFocus&&n.props.inputProps.onFocus(e)},n.handleBlur=function(e){n.setState({isFocused:!1}),n.props.inputProps&&n.props.inputProps.onBlur&&n.props.inputProps.onBlur(e)},n.handleMouseOut=function(){n.changeHighlightIndex(-1)},n.handleMouseOver=function(e){var t,i=e.target.closest("[".concat(C.Pm,"=true]"));if(i){var r=null===(t=n.dropDownRef)||void 0===t?void 0:t.querySelectorAll("[".concat(C.Pm,"=true]")),s=Array.prototype.indexOf.call(r,i);n.state.highlightedIndex!==s&&n.changeHighlightIndex(s)}},n.handleKeyDown=function(e){var t=function(){e.preventDefault(),e.stopPropagation(),e.persist()};"Escape"===e.key?(t(),n.changeHighlightIndex(-1,e)):"ArrowUp"===e.key?(t(),n.changeHighlightIndex(n.state.highlightedIndex-1,e)):"ArrowDown"===e.key&&(t(),n.changeHighlightIndex(n.state.highlightedIndex+1,e)),n.props.inputProps&&n.props.inputProps.onKeyDown&&"ArrowUp"!==e.key&&"ArrowDown"!==e.key&&n.props.inputProps.onKeyDown(e)},n.changeHighlightIndex=function(e,t){var i,r=null===(i=n.dropDownRef)||void 0===i?void 0:i.querySelectorAll("[".concat(C.Pm,"=true]"));r&&e>=r.length?e=-1:r&&e<-1&&(e=r.length-1),n.removeAllHighlights(),-1!==e&&(null==r||r.item(e).classList.add(C.pF),null==r||r.item(e).setAttribute("aria-selected","true")),n.setState({highlightedIndex:e},(function(){t&&n.props.inputProps&&n.props.inputProps.onKeyDown&&n.props.inputProps.onKeyDown(t)}))},n.removeAllHighlights=function(){var e,t=null===(e=n.dropDownRef)||void 0===e?void 0:e.querySelectorAll(".".concat(C.pF,"[").concat(C.Pm,"=true]"));t&&Array.from(t).forEach((function(e,n){t.item(n).classList.remove(C.pF),t.item(n).setAttribute("aria-selected","false")}))},n.state={isFocused:!1,highlightedIndex:-1},n}return(0,i.__extends)(t,e),t.prototype.render=function(){var e,t=(0,r.jsx)(g.P,{visibility:x.bv.Hidden,children:(0,r.jsx)(c.pd,{id:"".concat(this.inputID,"-hidden"),size:this.props.inputProps&&this.props.inputProps.size,type:this.props.inputProps&&this.props.inputProps.type||c.NZ.Text})});return(0,r.jsxs)(g.P,(0,i.__assign)({"aria-haspopup":"grid",position:x.yX.Relative,zIndex:x.Py.Default},(0,T.F)(this.props),{children:[(0,r.jsx)(g.P,{padding:.5,children:(e=this.props,void 0!==e.comboInputButtonProps?(0,r.jsx)(_.t,(0,i.__assign)({},this.props.inputProps,{buttonProps:(0,i.__assign)({},this.props.comboInputButtonProps),"data-a-target":"tray-search-input",id:this.inputID,onBlur:this.handleBlur,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown,ref:this.setInputRef,type:this.props.inputProps&&this.props.inputProps.type||c.NZ.Text})):(0,r.jsx)(c.pd,(0,i.__assign)({},this.props.inputProps,{"data-a-target":"tray-input",id:this.inputID,onBlur:this.handleBlur,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown,ref:this.setInputRef,type:this.props.inputProps&&this.props.inputProps.type||c.NZ.Text})))}),(0,r.jsx)(g.P,{attachTop:!0,background:x.VS.Base,borderRadius:w.Z.Large,display:this.props.showTray?x.nl.Block:x.nl.Hide,elevation:3,fullWidth:!0,padding:.5,position:x.yX.Absolute,zIndex:x.Py.Below,children:(0,r.jsxs)("div",{onMouseOut:this.handleMouseOut,onMouseOver:this.handleMouseOver,ref:this.setDropDownRef,children:[t,this.props.showTray&&this.props.children&&(0,r.jsx)(g.P,{padding:{top:.5},children:this.props.children})]})})]}))},t}(f.Component),R=n(732446),N=n(131883),H=n(172100);!function(e){e.Control="control",e.Variant1="variant1"}(b||(b={}));var F=n(628408),B=n(608141),q=function(e){function t(t){var n=e.call(this,t)||this;return n.inputTimeout=0,n.state={debouncedSearchQuery:t.searchQuery,requestID:(0,Q.aq)()},n}return(0,i.__extends)(t,e),t.prototype.componentDidUpdate=function(){var e=this;this.inputTimeout&&clearTimeout(this.inputTimeout),this.inputTimeout=setTimeout((function(){e.state.debouncedSearchQuery!==e.props.searchQuery&&e.setState({debouncedSearchQuery:e.props.searchQuery,requestID:(0,Q.aq)()})}),I.x2.dynamicSettings.get("search_debounce_timeout_ms",50))},t.prototype.componentWillUnmount=function(){this.inputTimeout&&clearTimeout(this.inputTimeout)},t.prototype.render=function(){var e=this.state,t=e.debouncedSearchQuery,n=e.requestID,s=F.e.AllWhiteSpace.test(t);return(0,r.jsx)(B.gr,(0,i.__assign)({},this.props,{isInOcssExperiment:I.x2.experiments.__hardcodedStaleExperiment("com30_ocss","control")===b.Variant1,isBlankQuery:s,searchQuery:t,requestID:n}))},t}(f.Component),A=n(148074),L=n(206461),j=n(942086),E="search-result-row",M=function(e){function t(t){var n=e.call(this,t)||this;n.selectedAllText=!1,n.previousSearchQueryID=null,n.searchQueryID=(0,Q.aq)(),n.searchSessionID=(0,Q.aq)(),n.prefilledText="",n.keystroke=0,n.calledSprigOnce=!1,n.renderSearchTray=function(){var e=n.state.tempSearchQuery||n.state.searchQuery,t=n.getTooltipProps().label;return(0,r.jsx)(k.V,{onClickOut:n.closeDropDown,children:(0,r.jsx)(P,{showTray:n.state.showTray,comboInputButtonProps:{disabledInteraction:!e,icon:s.t.NavSearch,onClick:n.doSearch,type:o.sK.Secondary,"aria-label":(0,I.hw)("Search Button","SearchBox")},inputProps:{autoComplete:"twitch-nav-search",onChange:n.onChange,onFocus:n.onFocus,onKeyDown:n.onKeyDown,placeholder:t,size:a.Y.Large,spellCheck:!1,type:c.NZ.Search,"aria-label":(0,I.hw)("Search Input","SearchBox"),value:e,maxLength:65,"aria-haspopup":"grid","aria-owns":n.state.showTray?B.gF:void 0,"aria-controls":n.state.showTray?B.gF:void 0,"aria-activedescendant":n.getActiveIndexID()},ref:n.saveTrayRef,children:(0,r.jsx)(q,{generateNewSearchQueryID:n.generateNewSearchQueryID,previousSearchQueryID:n.previousSearchQueryID,refDelegate:n.saveSearchTrayRef,refreshSuggestionHistory:n.refreshSuggestionHistory,searchQuery:n.state.searchQuery,searchQueryID:n.searchQueryID,searchSessionID:n.searchSessionID,suggestionHistory:n.state.suggestionHistory,updateSearchQuery:n.updateSearchQuery,prefilledText:n.prefilledText,keystroke:n.keystroke})})})},n.onKeyDown=function(e){var t,i,r,s;switch(e.key){case"Escape":case"Tab":return void(n.state.tempSearchQuery&&n.state.tempSearchQuery!==n.state.searchQuery?n.setState((function(e){return{searchQuery:e.tempSearchQuery}}),n.closeDropDown):n.closeDropDown());case"ArrowUp":case"ArrowDown":return void((n.state.searchQuery.length>0||n.state.suggestionHistory.suggestions.length>0)&&(n.openDropDown(),n.setTempSearchQuery()));case"Enter":return void n.doSearch();default:return n.selectedAllText=n.state.searchQuery.length>0&&0===(null===(i=null===(t=n.trayRef)||void 0===t?void 0:t.inputRef)||void 0===i?void 0:i.selectionStart)&&(null===(s=null===(r=n.trayRef)||void 0===r?void 0:r.inputRef)||void 0===s?void 0:s.selectionEnd)===n.state.searchQuery.length,void(n.state.searchQuery.length>=2&&!n.calledSprigOnce&&((0,j.Rg)("search_suggestion_appear",n.props.firstPageLoaded),n.calledSprigOnce=!0))}},n.onToggleBalloon=function(e){e||n.focusInput()},n.doSearch=function(){if(n.trayRef){var e=n.trayRef.getHighlightedIndex();e>-1&&n.searchTrayRef&&e<n.searchTrayRef.getSearchItems().length?n.searchTrayRef.selectSearchItem(e):n.state.searchQuery&&n.goToSearchResultPage(n.state.searchQuery),n.trayRef.setHighlightedIndex(-1),n.trayRef.inputRef&&n.trayRef.inputRef.blur()}},n.goToSearchResultPage=function(e){if(!n.isBlankQuery()){var t=(0,A.C8)(e);n.setState({suggestionHistory:t});var r=n.searchTrayRef?n.searchTrayRef.getSearchItems():[],s=(0,L.f8)(e,r),o=s.isImplicitAcceptance,a=s.suggestionIndex,c=n.searchTrayRef?n.searchTrayRef.getRequestID():"",l=void 0,u=void 0;o&&a>-1?u=r[l=a].tracking.suggestionID:r.length&&r[r.length-1].title===e&&(u=r[l=r.length-1].tracking.suggestionID);var h=(0,L.X4)({text:e,previousSearchQueryID:n.previousSearchQueryID,searchQueryID:n.searchQueryID,searchSessionID:n.searchSessionID,searchItemTrackingID:u}),d=h.state,p=(0,i.__rest)(h,["state"]);n.props.navigate(p,{state:d}),(0,L.K8)({previousSearchQueryID:n.previousSearchQueryID,searchQueryID:n.searchQueryID,searchSessionID:n.searchSessionID,suggestionID:u,suggestionPosition:l,suggestionText:e,explicitAcceptance:!1,implicitAcceptance:o,requestID:c,query:e,queryType:L.fe.UserTyped}),n.generateNewSearchQueryID()}},n.generateNewSearchQueryID=function(){n.previousSearchQueryID=n.searchQueryID,n.searchQueryID=(0,Q.aq)()},n.openDropDown=function(){n.setState({showTray:!0})},n.closeDropDown=function(){n.setState((function(e){var t;return e.showTray?(null===(t=n.toggleBalloonWrapperRef)||void 0===t||t.toggleBalloon(!1),{showTray:!1}):null}))},n.onChange=function(e){var t=e.target.value;(0===t.length||n.selectedAllText)&&(n.searchSessionID=(0,Q.aq)()),n.setState({searchQuery:t,tempSearchQuery:""}),n.keystroke+=1},n.onFocus=function(){""===n.state.searchQuery&&(n.searchSessionID=(0,Q.aq)()),(0,L.cB)(n.searchSessionID),(n.state.suggestionHistory.suggestions.length>0||n.state.searchQuery)&&n.openDropDown(),n.prefilledText=n.state.searchQuery,n.keystroke=0},n.saveTrayRef=function(e){n.trayRef=e},n.saveSearchTrayRef=function(e){n.searchTrayRef=e},n.saveToggleBalloonWrapper=function(e){n.toggleBalloonWrapperRef=e},n.refreshSuggestionHistory=function(){n.setState({suggestionHistory:(0,A.Z0)()})},n.updateSearchQuery=function(e){n.setState({searchQuery:e,tempSearchQuery:""})},n.isBlankQuery=function(){return F.e.AllWhiteSpace.test(n.state.searchQuery)},n.handleFocusSearch=function(e){"f"===e.key&&e.altKey&&(e.preventDefault(),n.focusInput())},n.getActiveIndexID=function(){if(n.trayRef){var e=n.trayRef.getHighlightedIndex();if(e>-1&&n.state.tempSearchQuery)return"".concat(E,"__").concat(e)}},n.focusInput=function(){n.trayRef&&n.trayRef.focusInput()},n.setTempSearchQuery=function(){if(n.trayRef){var e=n.trayRef.getHighlightedIndex(),t="";if(e>-1)if(n.state.searchQuery.length>0&&n.searchTrayRef){var i=n.searchTrayRef.getSearchItems();i.length&&(t=i[e].title)}else!n.state.searchQuery.length&&n.state.suggestionHistory.suggestions.length>0&&(t=n.state.suggestionHistory.suggestions[e]);n.setState({tempSearchQuery:t})}};var l="";if(0===t.location.pathname.indexOf("/search")){var u=m.parse(n.props.location.search);u.term&&(l=u.term.toString(),(0,A.C8)(l))}return n.state={searchQuery:l,showTray:!1,suggestionHistory:(0,A.Z0)(),tempSearchQuery:""},n}return(0,i.__extends)(t,e),t.prototype.componentDidMount=function(){this.props.subscribe(this.closeDropDown),window.addEventListener("keydown",this.handleFocusSearch)},t.prototype.componentDidUpdate=function(e,t){if(e.location.pathname!==this.props.location.pathname&&"/search"!==this.props.location.pathname&&this.setState({searchQuery:"",tempSearchQuery:""},this.closeDropDown),t.searchQuery!==this.state.searchQuery){var n=this.state.searchQuery.length>0&&!this.isBlankQuery();!n&&this.state.suggestionHistory.suggestions.length>0&&t.suggestionHistory===this.state.suggestionHistory||n&&e.location.state===this.props.location.state&&e.location.search===this.props.location.search||t.searchQuery.length>0&&!n&&this.props.truncated?this.openDropDown():this.closeDropDown(),this.trayRef&&this.trayRef.setHighlightedIndex(-1)}t.suggestionHistory.suggestions.length>0&&0===this.state.suggestionHistory.suggestions.length&&this.closeDropDown()},t.prototype.componentWillUnmount=function(){window.removeEventListener("keydown",this.handleFocusSearch)},t.prototype.render=function(){var e=this.renderSearchTray(),t=this.getTooltipProps();return this.props.truncated?(0,r.jsxs)(D.P,{onToggle:this.onToggleBalloon,tooltipProps:t,ref:this.saveToggleBalloonWrapper,children:[(0,r.jsx)(l.a2,{"aria-label":t.label,icon:u.D,title:t.label}),(0,r.jsx)(h.E,{direction:d.j.BottomRight,size:p.$V.Large,offsetX:"-16.5rem",children:e})]}):(0,r.jsx)(g.P,{className:"search-box","data-a-target":"nav-search-box",children:e})},t.prototype.getTooltipProps=function(){return{align:y.HX.Center,direction:y.n5.Bottom,label:(0,I.hw)("Search","SearchBox")}},t}(f.Component);var O=(0,S.Zz)((0,v.Ng)((function(e){return{isLoggedIn:(0,N.M3)(e),firstPageLoaded:e.session.firstPageLoaded}})),R.y,(0,H.Rn)((function(e){return{channelLogin:e.channelLogin,setChannelLogin:e.setChannelLogin}})))(M)},608141:function(e,t,n){"use strict";n.d(t,{gF:function(){return z},B0:function(){return M},gr:function(){return J}});var i=n(331635),r=n(474848),s=n(296540),o=n(415044),a=n(868238),c=n(478260),l=n(191132),u=n(928778),h=n(732446),d=n(105146),p=n(131883),g=n(183948),y=n(82984),m=n(714742),f=n(959340),v=n(947322),S=n(97774),I=n(235233),k=n(973474),D=n(278818),x=n(848683),_=n(914421),w=n(663953),C=n(85208),T=n(471417),Q=n(79004),b=n(34212),P=n(312663),R=n(246942),N=n.n(R),H=n(264433),F=n(532968),B=n(177391),q=n(588702);var A,L,j=n(148074),E=n(206461);!function(e){e.CategoryBoxArt="category-box-art",e.ChannelAvatar="channel-avatar",e.HistoryIcon="history-icon",e.LiveBadge="live-badge",e.RemoveHistory="delete-history",e.SearchIcon="search-icon",e.VerifyBadge="verify-badge"}(A||(A={})),function(e){e[e.Category=0]="Category",e[e.Channel=1]="Channel",e[e.History=2]="History",e[e.String=3]="String",e[e.Direct=4]="Direct"}(L||(L={}));var M,O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.element=null,t.recalculateTimeout=0,t.getDirectLinkLabel=function(){return(0,c.hw)("Go to {title}",{title:t.props.title},"SearchItem")},t.getAriaLabel=function(){var e=t.props.type;switch(e){case L.Direct:return t.getDirectLinkLabel();case L.Channel:return t.getChannelLinkLabel();case L.Category:return(0,c.hw)("{title} Category",{title:t.props.title},"SearchItem");case L.History:return(0,c.hw)("{title} Previous Search",{title:t.props.title},"SearchItem");case L.String:return(0,c.hw)("Search for {title}",{title:t.props.title},"SearchItem");default:return(0,F.x)(e)}},t.renderImage=function(){var e=null;return t.props.type===L.Direct?(0,r.jsx)(f.P,{margin:{right:.5}}):(e=t.props.type===L.Channel?(0,r.jsx)(v.e,{alt:t.props.imageAlt,borderRadius:S.Z.Rounded,"data-test-selector":A.ChannelAvatar,size:30,src:t.props.image,userLogin:t.props.login}):t.props.type===L.Category?(0,r.jsx)(I.j$,{ratio:I.gl.BoxArt,children:(0,r.jsx)(k.L,{alt:t.props.imageAlt,"data-test-selector":A.CategoryBoxArt,src:t.props.image})}):t.props.type===L.History?(0,r.jsx)(D.k,{"data-test-selector":A.HistoryIcon}):(0,r.jsx)(x.D,{"data-test-selector":A.SearchIcon}),(0,r.jsx)(f.P,{className:"search-item__icon",display:_.nl.Flex,flexShrink:0,justifyContent:_.A9.Center,margin:{right:.5},children:e}))},t.renderLive=function(){return t.props.type===L.Channel&&t.props.isLive?(0,r.jsx)(f.P,{"data-test-selector":A.LiveBadge,margin:{left:.5},children:t.props.isWatchParty?(0,r.jsx)(w.qd,{label:(0,c.hw)("Watch Party","SearchItemChannelStatusIndicator")}):(0,r.jsx)(w.qd,{label:(0,c.hw)("Live","SearchItemChannelStatusIndicator")})}):null},t.renderVerified=function(){return t.props.type===L.Channel&&t.props.isVerified?(0,r.jsx)(f.P,{display:_.nl.Flex,margin:{left:"0.2rem"},children:(0,r.jsx)(C.K,{fillColor:T.jo.Brand,"data-test-selector":A.VerifyBadge,size:18})}):null},t.renderDJ=function(){return t.props.type===L.Channel&&t.props.isDJ?(0,r.jsx)(f.P,{display:_.nl.Flex,margin:{left:"0.2rem"},children:(0,r.jsx)(B.m,{size:18})}):null},t.renderRemoveHistory=function(e){return t.props.type!==L.History?null:(0,r.jsx)(f.P,{children:(0,r.jsx)(Q.a2,{"aria-label":(0,c.hw)("Remove {title} from search history",{title:e},"SearchItem"),"data-test-selector":A.RemoveHistory,icon:b.O,onClick:t.handleRemoveHistory})})},t.handleRemoveHistory=function(e){e.preventDefault(),e.stopPropagation(),(0,j.xt)(t.props.title),t.props.refreshSuggestionHistory()},t.handleClick=function(e){(0,j.C8)(t.props.title),t.props.refreshSuggestionHistory(),(0,E.yk)(t.props.tracking),t.props.onClick&&t.props.onClick(e)},t.setRef=function(e){return t.element=e},t.debounceImpressionTracking=function(){clearTimeout(t.recalculateTimeout),t.recalculateTimeout=setTimeout((function(){t.handleImpressionTracking()}),100)},t.handleImpressionTracking=function(){t.element&&function(e,t){var n=t||100,i=e.getBoundingClientRect(),r=window.innerHeight,s=window.innerWidth;if(i.left<s&&i.right>0&&i.top<r&&i.bottom>0){var o=i.height;return Math.min(r-i.top,o,r)/o*100>=n}return!1}(t.element,75)&&((0,E.c6)(t.props.tracking),t.removeImpressionListener())},t.removeImpressionListener=function(){window.removeEventListener("resize",t.debounceImpressionTracking)},t}return(0,i.__extends)(t,e),t.prototype.componentDidMount=function(){window.addEventListener("resize",this.debounceImpressionTracking),this.handleImpressionTracking()},t.prototype.componentWillUnmount=function(){this.removeImpressionListener()},t.prototype.render=function(){var e,t,n,i,s,o,a,c=N()("search-item",{"search-item__without-image":this.props.type===L.History||this.props.type===L.String||this.props.type===L.Direct,"search-item__with-image":this.props.type===L.Category||this.props.type===L.Channel,"search-item__history":this.props.type===L.History});return this.props.highlightQuery?(t=this.props.title,n=this.props.highlightQuery.begin,i=this.props.highlightQuery.end,s=t.slice(0,n),o=t.slice(n,i),a=t.slice(i,t.length),e=(0,r.jsxs)(r.Fragment,{children:[s.length?(0,r.jsx)(P.N,{type:q.M2.Strong,children:s}):null,o,a.length?(0,r.jsx)(P.N,{type:q.M2.Strong,children:a}):null]})):e=this.props.type===L.Direct?this.getDirectLinkLabel():this.props.title,(0,r.jsx)("div",{ref:this.setRef,role:"cell",children:(0,r.jsx)(H.eb,{interactableProps:{"aria-label":this.getAriaLabel(),linkTo:this.props.linkTo,onClick:this.handleClick},children:(0,r.jsxs)(f.P,{alignItems:_.k2.Center,className:c,"data-a-target":"nav-search-item",display:_.nl.Flex,padding:{x:.5},children:[this.renderImage(),(0,r.jsxs)(f.P,{alignItems:_.k2.Center,display:_.nl.Flex,ellipsis:!0,flexGrow:1,children:[(0,r.jsx)(P.N,{ellipsis:!0,fontSize:_.Z4.Size4,children:e}),(0,r.jsxs)(f.P,{margin:{left:"0.3rem"},display:"flex",children:[this.renderVerified(),this.renderDJ()]})]}),this.renderLive(),this.renderRemoveHistory(this.props.title)]})})})},t.prototype.getChannelLinkLabel=function(){return this.props.type===L.Channel&&this.props.isWatchParty?(0,c.hw)("{title} Watch Party",{title:this.props.title},"SearchItem"):this.props.type===L.Channel&&this.props.isLive?(0,c.hw)("{title} Live Channel",{title:this.props.title},"SearchItem"):(0,c.hw)("{title} Channel",{title:this.props.title},"SearchItem")},t}(s.Component),V=n(957139),U=n(19951),G=n.n(U);!function(e){e.Category="SearchSuggestionCategory",e.Channel="SearchSuggestionChannel"}(M||(M={}));var W,z="search-tray__container";!function(e){e.LoadingState="loading",e.AvailableState="available",e.UnavailableState="unavailable"}(W||(W={}));var K=(0,l.U)({name:"SearchSuggestions",category:"discover"}),Y=K.Available,Z=K.Unavailable,X=function(e){function t(t){var n=e.call(this,t)||this;return n.lastResponseID="",n.getRequestID=function(){return n.props.requestID},n.getSearchItems=function(){return n.props.searchQuery?n.state.searchItems:n.state.historyItems},n.selectSearchItem=function(e){var t=n.getSearchItems();if(!(e<0||e>=t.length)){(0,E.yk)(t[e].tracking),t[e].type!==L.History&&t[e].type!==L.String||n.trackSearchQuerySubmit(e),(0,j.C8)(t[e].title),n.props.refreshSuggestionHistory();var r=t[e].linkTo,s=r.state,o=(0,i.__rest)(r,["state"]);n.props.navigate(o,{state:s})}},n.setSearchItemsFromData=function(e){var t,i,r,s,o=[],a=n.props.data;if(e!==n.props&&(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.loading)&&(null==a?void 0:a.error))n.setState({searchItems:[n.getUserTypedSearchItem(0),n.getDirectToChannelSearchItem(1)],isClientAvailable:W.UnavailableState,errorMessage:a.error.message});else{var c=null===(r=null===(i=null==a?void 0:a.searchSuggestions)||void 0===i?void 0:i.tracking)||void 0===r?void 0:r.responseID;if(c&&c!==n.lastResponseID){n.lastResponseID=c;var l=((null===(s=null==a?void 0:a.searchSuggestions)||void 0===s?void 0:s.edges)||[]).filter((function(e){return null!==e.node}));l.length>0&&(o=l.map(n.getSearchItemProps)),1===o.length&&o[0].type===L.String&&o[0].title===n.props.searchQuery||o.push(n.getUserTypedSearchItem(o.length)),o.push(n.getDirectToChannelSearchItem(o.length)),n.setState({searchItems:o,isClientAvailable:W.AvailableState,errorMessage:null},(function(){n.reportSuggestionsReturned()}))}}},n.renderSearchItem=function(e,t){return(0,r.jsx)("div",{id:"".concat(m.HV,"__").concat(t),role:"row",children:(0,r.jsx)(O,(0,i.__assign)({},e))},"".concat(e.title,"-").concat(e.tracking.suggestionID))},n.getSearchItemProps=function(e,t){var i,r,s,o,a,l,u,h,d,p,g,y=e.node,m=y.matchingCharacters?{begin:y.matchingCharacters.start,end:y.matchingCharacters.end}:void 0;if((null===(i=y.content)||void 0===i?void 0:i.__typename)===M.Channel){var f=(0,V.yo)(null===(o=null===(s=null===(r=y.content.user)||void 0===r?void 0:r.stream)||void 0===s?void 0:s.game)||void 0===o?void 0:o.id);g={highlightQuery:m,isWatchParty:f,isLive:y.content.isLive,image:y.content.profileImageURL||c.$W.defaultAvatarURL,imageAlt:y.text,isVerified:y.content.isVerified,isDJ:null!==(u=null===(l=null===(a=y.content.user)||void 0===a?void 0:a.roles)||void 0===l?void 0:l.isParticipatingDJ)&&void 0!==u?u:void 0,linkTo:(0,E.X4)({text:f?"".concat(y.content.login,"/watchparty"):y.content.login,content:"suggestion_channel",searchSessionID:n.props.searchSessionID,searchItemTrackingID:y.id}),login:y.content.login,refreshSuggestionHistory:n.props.refreshSuggestionHistory,searchQuery:n.props.searchQuery,title:y.text,tracking:n.getSearchSuggestionParams({contentID:y.content.id,clickedChannelID:y.content.id,index:t,suggestionID:y.id,text:y.text,type:y.content.isLive?E.Yf.Live:E.Yf.Offline}),type:L.Channel}}else g=(null===(h=y.content)||void 0===h?void 0:h.__typename)===M.Category?{highlightQuery:m,image:y.content.boxArtURL,imageAlt:y.text,linkTo:(0,E.X4)({text:null!==(p=null===(d=y.content.game)||void 0===d?void 0:d.slug)&&void 0!==p?p:"",content:"suggestion_game",searchSessionID:n.props.searchSessionID,searchItemTrackingID:y.id}),refreshSuggestionHistory:n.props.refreshSuggestionHistory,searchQuery:n.props.searchQuery,title:y.text,tracking:n.getSearchSuggestionParams({contentID:y.content.id,clickedCategoryID:y.content.id,index:t,suggestionID:y.id,text:y.text,type:E.Yf.Category}),type:L.Category}:{highlightQuery:m,linkTo:(0,E.X4)({text:y.text,content:"view_more",previousSearchQueryID:n.props.previousSearchQueryID,searchQueryID:n.props.searchQueryID,searchSessionID:n.props.searchSessionID,searchItemTrackingID:y.id}),onClick:n.trackSearchQuerySubmit.bind(n,t),refreshSuggestionHistory:n.props.refreshSuggestionHistory,searchQuery:n.props.searchQuery,title:y.text,tracking:n.getSearchSuggestionParams({index:t,suggestionID:y.id,text:y.text,type:E.Yf.Text}),type:L.String};return g},n.getHistorySearchItemProps=function(e,t){var i=(0,d.aq)();return{linkTo:(0,E.X4)({text:e,content:"view_more",previousSearchQueryID:n.props.previousSearchQueryID,searchQueryID:n.props.searchQueryID,searchSessionID:n.props.searchSessionID,searchItemTrackingID:i}),onClick:n.trackSearchQuerySubmit.bind(n,t),refreshSuggestionHistory:n.props.refreshSuggestionHistory,searchQuery:"",title:e,tracking:n.getSearchSuggestionParams({index:t,isFrontEndGenerated:!0,suggestionID:i,text:e,type:E.Yf.History}),type:L.History}},n.getUserTypedSearchItem=function(e){var t=n.props,i=t.refreshSuggestionHistory,r=t.previousSearchQueryID,s=t.searchSessionID,o=t.searchQueryID,a=t.searchQuery,c=(0,d.aq)();return{linkTo:(0,E.X4)({text:a,content:"view_more",previousSearchQueryID:r,searchQueryID:o,searchSessionID:s,searchItemTrackingID:c}),onClick:n.trackSearchQuerySubmit.bind(n,e),refreshSuggestionHistory:i,searchQuery:a,title:a,tracking:n.getSearchSuggestionParams({index:e,isFrontEndGenerated:!0,suggestionID:c,text:a,type:E.Yf.Text}),type:L.String}},n.getDirectToChannelSearchItem=function(e){var t=n.props,i=t.refreshSuggestionHistory,r=t.previousSearchQueryID,s=t.searchSessionID,o=t.searchQueryID,a=t.searchQuery,c=(0,d.aq)();return{linkTo:(0,E.X4)({text:a.trim(),content:"direct_to_channel",previousSearchQueryID:r,searchQueryID:o,searchSessionID:s,searchItemTrackingID:c}),refreshSuggestionHistory:i,searchQuery:a,title:a,tracking:n.getSearchSuggestionParams({index:e,isFrontEndGenerated:!0,suggestionID:c,text:a,type:E.Yf.Direct}),type:L.Direct}},n.updateHistoryItems=function(){n.setState({historyItems:n.props.suggestionHistory.suggestions.map(n.getHistorySearchItemProps),isClientAvailable:W.AvailableState,errorMessage:null})},n.getSearchSuggestionParams=function(e){var t,i,r,s=n.props.data,o=n.props.requestID,a=n.props.searchQuery;return e.type===E.Yf.History&&(o=null,a=e.text),e.type===E.Yf.Text||e.type===E.Yf.History||e.type===E.Yf.Direct?t=e.text:e.type===E.Yf.Category?i=e.text:e.type===E.Yf.Live&&(r=e.text),{clickedItemID:e.contentID,clickedCategoryID:e.clickedCategoryID,clickedChannelID:e.clickedChannelID,searchSessionID:n.props.searchSessionID,itemPosition:e.index,requestID:o,responseID:e.isFrontEndGenerated?"":n.lastResponseID,modelTrackingID:s&&s.searchSuggestions&&s.searchSuggestions.tracking&&s.searchSuggestions.tracking.modelTrackingID||"",query:a,suggestionID:e.suggestionID,suggestionText:e.text,suggestedText:t,suggestedCategory:i,suggestedChannel:r,suggestionType:e.type,isFrontEndGenerated:e.isFrontEndGenerated}},n.trackSearchQuerySubmit=function(e){var t=n.getSearchItems(),i=!n.props.searchQuery,r=i?E.fe.History:E.fe.Suggestion,s=n.props.searchQuery&&t[e].tracking.isFrontEndGenerated,o=(0,E.f8)(n.props.searchQuery,t),a=o.isImplicitAcceptance,c=o.suggestionIndex;s&&a&&c>-1&&(e=c),(0,E.K8)({previousSearchQueryID:n.props.previousSearchQueryID,searchQueryID:n.props.searchQueryID,searchSessionID:n.props.searchSessionID,suggestionID:t[e].tracking.suggestionID,suggestionPosition:e,suggestionText:t[e].title,explicitAcceptance:!s,implicitAcceptance:!!s&&a,requestID:i?"":n.props.requestID,query:t[e].title,queryType:r}),n.props.updateSearchQuery(t[e].title),n.props.generateNewSearchQueryID()},n.trackSearchSuggestionRequest=function(){n.props.searchQuery&&(0,E.fd)({keystroke:n.props.keystroke,prefilledText:n.props.prefilledText,requestID:n.props.requestID,searchSessionID:n.props.searchSessionID,query:n.props.searchQuery})},n.reportSuggestionsReturned=function(){n.suggestionsReturned&&n.props.latencyTracking.reportCustomEvent(n.suggestionsReturned)},n.registerSuggestionsReturnedEvent=function(){return n.props.latencyTracking.resetCustomEvents("Search"),n.props.latencyTracking.registerCustomEvent({benchmark:300,group:"Search",key:"search-suggestions-returned",label:"Suggestions Rendered",start:"registration"})},n.state={historyItems:t.suggestionHistory.suggestions.map(n.getHistorySearchItemProps),searchItems:[],isClientAvailable:W.LoadingState,errorMessage:null},n}return(0,i.__extends)(t,e),t.prototype.componentDidMount=function(){this.props.refDelegate&&this.props.refDelegate(this),this.setSearchItemsFromData(),this.trackSearchSuggestionRequest()},t.prototype.componentDidUpdate=function(e){e.suggestionHistory!==this.props.suggestionHistory&&this.updateHistoryItems(),this.setSearchItemsFromData(e),e.searchQuery!==this.props.searchQuery&&(this.suggestionsReturned=this.registerSuggestionsReturnedEvent(),this.trackSearchSuggestionRequest())},t.prototype.render=function(){var e,t,n=this.props.searchQuery&&!this.props.isBlankQuery?this.state.searchItems:this.state.historyItems;return t=this.state.isClientAvailable===W.LoadingState?(0,r.jsx)(r.Fragment,{children:n.map(this.renderSearchItem)}):this.state.isClientAvailable===W.UnavailableState?(0,r.jsx)(Z,{reason:null!==(e=this.state.errorMessage)&&void 0!==e?e:"data error",children:n.map(this.renderSearchItem)}):(0,r.jsx)(Y,{children:n.map(this.renderSearchItem)}),(0,r.jsx)("div",{className:"search-tray","data-a-target":"nav-search-tray",role:"grid",id:z,children:t})},t}(s.Component);var J=(0,a.Zz)(h.y,(0,o.Ng)((function(e){return{isLoggedIn:(0,p.M3)(e)}})),(0,u._v)(G(),{options:function(e){return{errorPolicy:"no-cache-write",variables:{requestID:e.requestID,queryFragment:e.searchQuery,withOfflineChannelContent:e.isInOcssExperiment,includeIsDJ:(0,g.R)()}}},skip:function(e){return!e.searchQuery||e.isBlankQuery}}),(0,y.W)("SearchTray",{autoReportInteractive:!0}))(X)},628408:function(e,t,n){"use strict";n.d(t,{e:function(){return i}});var i={AllWhiteSpace:/^\s+$/}},148074:function(e,t,n){"use strict";n.d(t,{C8:function(){return u},Z0:function(){return l},xt:function(){return h}});var i=n(331635),r=n(478260),s=n(131883),o="searchSuggestionHistory",a=5,c=function(){return{id:"",suggestions:[]}};function l(e){void 0===e&&(e=!0);var t=r.IG.get(o,c());if(e){var n=r.x2.store.getState(),a=(0,s.wz)(n),l=a?a.id:"";if((0,s.H4)(n)&&(!t||t.id!==l))return function(e){var t=(0,i.__assign)((0,i.__assign)({},c()),{id:e||""});return r.IG.set(o,t),t}(l)}return t}function u(e){var t=l(),n=t.suggestions.indexOf(e);return n>-1&&t.suggestions.splice(n,1),t.suggestions.unshift(e),t.suggestions.length>a&&(t.suggestions.length=a),r.IG.set(o,t),t}function h(e){var t=l(),n=t.suggestions.indexOf(e);return n>-1&&t.suggestions.splice(n,1),r.IG.set(o,t),t}},206461:function(e,t,n){"use strict";n.d(t,{FW:function(){return p},K8:function(){return v},X4:function(){return h},Yf:function(){return i},c6:function(){return m},cB:function(){return y},f8:function(){return u},fd:function(){return S},fe:function(){return d},yk:function(){return f},z$:function(){return g}});var i,r=n(331635),s=n(478260),o=n(672052),a=n(105146),c=n(881554),l="search_bar";function u(e,t){var n=!1,i=-1;return t.forEach((function(t,r){t.title.toLocaleLowerCase()!==e.toLocaleLowerCase()||t.tracking.isFrontEndGenerated||(n=!0,i=r)})),{isImplicitAcceptance:n,suggestionIndex:i}}function h(e){var t,n=e.text,i=e.content,s=e.previousSearchQueryID,a=e.searchQueryID,c=e.searchSessionID,l=e.searchItemTrackingID;return t="suggestion_channel"===i||"direct_to_channel"===i?{pathname:"/".concat(encodeURIComponent(n))}:"suggestion_game"===i?{pathname:(0,o._4)({slug:n})}:(0,o.iS)(n),(0,r.__assign)((0,r.__assign)({},t),{state:p({content:i,previousSearchQueryID:s,searchQueryID:a,searchSessionID:c,searchItemTrackingID:l})})}!function(e){e.Category="category",e.Live="live",e.Offline="offline_channel",e.Text="text",e.History="history",e.Direct="direct_to_channel"}(i||(i={}));var d,p=function(e){var t;return(t={content:e.content,medium:"search"})[c.oK]=e.searchSessionID,t[c.I6]=e.searchQueryID,t[c.f7]=e.searchItemTrackingID,t.previous_search_query_id=e.previousSearchQueryID,t.freeform_tag_filter=e.freeformTagFilter,t};function g(){var e=s.E5.getLastPageview();return{location:e&&e.location,content:e&&e.content,content_type:e&&e.content_type}}function y(e){s.E5.track("search_input_focus",(0,r.__assign)({search_session_id:e},g()))}function m(e){s.E5.__track_SSRMigrationFixme("search_suggestion_display",(0,r.__assign)({search_session_id:e.searchSessionID,item_position:e.itemPosition,request_id:e.requestID,response_id:e.responseID,section:l,model_tracking_id:e.modelTrackingID,query:e.query,suggestion_tracking_id:e.suggestionID||(0,a.aq)(),suggestion_text:e.suggestionText,suggestion_type:e.suggestionType,suggested_channel:e.suggestedChannel,suggested_category:e.suggestedCategory,suggested_text:e.suggestedText},g()))}function f(e){s.E5.__track_SSRMigrationFixme("search_suggestion_click",(0,r.__assign)({clicked_item_id:e.clickedItemID,clicked_category_id:e.clickedCategoryID,clicked_channel_id:e.clickedChannelID,search_session_id:e.searchSessionID,item_position:e.itemPosition,request_id:e.requestID,response_id:e.responseID,section:l,model_tracking_id:e.modelTrackingID,query:e.query,suggestion_tracking_id:e.suggestionID||(0,a.aq)(),suggestion_text:e.suggestionText,suggestion_type:e.suggestionType},g()))}function v(e){s.E5.track("search_query_submit",(0,r.__assign)({search_session_id:e.searchSessionID,search_query_id:e.searchQueryID,suggestion_tracking_id:e.suggestionID||(0,a.aq)(),suggestion_position:e.suggestionPosition,suggestion_text:e.suggestionText,explicit_acceptance:e.explicitAcceptance,implicit_acceptance:e.implicitAcceptance,request_id:e.requestID,query:e.query,query_type:e.queryType,previous_search_query_id:e.previousSearchQueryID},g()))}function S(e){s.E5.track("search_suggestion_request",(0,r.__assign)({request_id:e.requestID,search_session_id:e.searchSessionID,query:e.query,section:"search_bar",prefilled_text:e.prefilledText,keystroke:e.keystroke},g()))}!function(e){e.Suggestion="suggestion",e.History="history",e.UserTyped="user_typed",e.ShowAll="show_all"}(d||(d={}))}}]);